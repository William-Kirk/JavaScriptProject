<!DOCTYPE html>
<html>

<head>
  <link href="./resources/dist/output.css" type="text/css" rel="stylesheet" />
  <link href="./resources/css/index.css" type="text/css" rel="stylesheet" />

  <title>William's Project - Rock Paper Scissors</title>
</head>

<body class="title-screen">
  <header>
    <!-- This example requires Tailwind CSS v2.0+ -->
    <nav class="bg-white shadow">
      <div class="mx-auto px-2 sm:px-6 lg:px-8">
        <!--figure out a way to set the minimum width to something that makes sense-->
        <div class="relative flex justify-between h-16">
          <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
            <!-- Mobile menu button -->
            <button type="button"
              class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500"
              aria-controls="mobile-menu" aria-expanded="false">
              <span class="sr-only">Open main menu</span>
              <!--
                        Icon when menu is closed.
            
                        Heroicon name: outline/menu
            
                        Menu open: "hidden", Menu closed: "block"
                        -->
              <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
              <!--
                        Icon when menu is open.
            
                        Heroicon name: outline/x
            
                        Menu open: "block", Menu closed: "hidden"
                        -->
              <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start">
            <div class="flex-shrink-0 flex items-center">
              <h1 class="text-2xl font-bold text-gray-700">
                William's Project
              </h1>
            </div>
          </div>
          <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
            <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
              <!-- Current: "border-indigo-500 text-gray-900", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
              <a href="./index.html"
                class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                Tip Calculator
              </a>
              <a href="./grocery.html"
                class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                Grocery List
              </a>
              <a href="./game.html"
                class="border-transparent text-gray-900 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                Rock, Paper, Scissors
              </a>
              <a href="./weather.html"
                class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                Weather Dashboard
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Mobile menu, show/hide based on menu state. -->
      <div class="sm:hidden" id="mobile-menu">
        <div class="pt-2 pb-4 space-y-1">
          <!-- Current: "bg-indigo-50 border-indigo-500 text-indigo-700", Default: "border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700" -->
          <a href="./index.html"
            class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Tip
            Calculator</a>
          <a href="./grocery.html"
            class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Grocery
            List</a>
          <a href="./game.html"
            class="bg-indigo-50 border-indigo-500 text-indigo-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Rock,
            Paper, Scissors</a>
          <a href="./weather.html"
            class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Weather
            Dashboard</a>
        </div>
      </div>
    </nav>
  </header>



  <div>
    <div id="title-popup" style="margin: 50px;" class="flex justify-center">
      <div
        style="border-radius: 15px; border:solid rgb(138, 158, 171) 3px;background-size:400px;width:800px; height:500px;"
        class="bg-white shadow sm:rounded-lg">
        <div class="px-4 py-5 sm:p-6">
          <hr style="margin-top:25px">
          <!-- <img style="margin: 0 auto; width: 400px; height:100px;"src="./resources/Images/rckprsr.png"> -->
          <h1
            style="margin: 15px 160px; text-align: center; font-size: xx-large; font-weight: bold; color:rgb(56, 63, 67);"
            class="">Rock Paper Scissors</h1>
          <hr>
          <div style="margin-top:8px;" class="flex justify-center">
            <div style="font-size: small;margin: 0 10px;">
              <div class="mini-text-box inline-flex border border-gray-300 rounded-md bg-gray-50 text-l text-gray-500 ">
                <p>The Rock Paper Scissor champions, masters of concealing their intentions and reading yours. You're here to challenge them.</p>
              </div>
            </div>
            <div style="font-size:small;margin: 0 8px;">
              <div class="mini-text-box inline-flex border border-gray-300 rounded-md bg-gray-50 text-l text-gray-500 ">
                <p>The game is simple. Rock beats scissors, paper beats rock, scissors beat paper. In this game, you and your opponent have 3 hearts of health. When one of you loses a turn, a heart is taken. Get the enemy down to 0 hearts to win.</p>
              </div>
            </div>
            <div style="font-size:small;margin: 0 8px;">
              <div class="mini-text-box inline-flex border border-gray-300 rounded-md bg-gray-50 text-l text-gray-500 ">
                <p>Good luck defeating all six of the master rock paper scissor champions! Each champion has their own biases that affect their choices. Try to recognize their patterns and beat them with wits.</p>
              </div>
            </div>
          </div>
          <div style="margin-top: 50px;" class="mt-5 flex justify-center">
            <button type="button" id="start-game-button" style="font-size: large; padding: 25px 50px;"
              class="bg-gray-50 inline-flex items-center px-4 py-2 border font-medium rounded-md text-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm">
              Start Game!
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="flex justify-center">
      <div id="character-selector">
        <div style="margin: 25px auto; margin-bottom: 0px; width: 700px;font-size: xx-large; font-weight:bold; background-color:white; border-color:rgb(186, 196, 204); border-radius: 15px; border-width: 3px;" class="flex justify-center">
          <div><div>CHOOSE YOUR OPPONENT</div><div style="font-size:small; text-align:center;">Characters drawn by my friend Grace!</div></div>
        </div>
        <div class="characters">
          <div class="flex justify-center">
            <button id="character-0">
              <div class="character-fighter">
                <img class="character-fighter-img" style="display:block"
                  src="./resources/images/characters/ChooseYourFighter_1.PNG">
                <h1 class="character-fighter-txt">The Crusher</h1>
              </div>
            </button>
            <button id="character-1">
              <div class="character-fighter">
                <img class="character-fighter-img" style="display:block "
                  src="./resources/images/characters/ChooseYourFighter_2.PNG">
                <h1 class="character-fighter-txt">The r i p p e r</h1>
              </div>

            </button>
            <button id="character-2">
              <div class="character-fighter">
                <img class="character-fighter-img" style="display:block"
                  src="./resources/images/characters/ChooseYourFighter_3.PNG">
                <h1 class="character-fighter-txt">THE STURDY</h1>
              </div>
            </button>
          </div>
          <div class="flex justify-center">
            <button id="character-3">
              <div class="character-fighter">
                <img class="character-fighter-img" style="display:block"
                  src="./resources/images/characters/ChooseYourFighter_4.PNG">
                <h1 class="character-fighter-txt">the slippery</h1>
              </div>
            </button>
            <button id="character-4">
              <div class="character-fighter">
                <img class="character-fighter-img" style="display:block"
                  src="./resources/images/characters/ChooseYourFighter_5.jpeg">
                <h1 class="character-fighter-txt">The SMaShEr</h1>
              </div>
            </button>
            <button id="character-5">
              <div class="character-fighter">
                <img class="character-fighter-img" style="display:block"
                  src="./resources/images/characters/ChooseYourFighter_6.PNG">
                <h1 class="character-fighter-txt">Doug lol</h1>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div style="margin-top:100px;" class="flex justify-center">
      <div id="fight-space" ;
        style="border-radius:28px;background-repeat:no-repeat;background-image:url('resources/Images/pokemon.png'); background-size: contain;"
        class="fight">
        <div>
          <div style="margin-bottom:70px;" class="flex justify-between">
            <div>
              <div class="opponent-name">
                <div id="enemy-info-space">Enemy Name and Health</div>
                <div id="enemy-hearts" class="flex">
                  <img style='width:32px; height:32px;' src="./resources/Images/heart.png">
                  <img style='width:32px; height:32px;' src="./resources/Images/heart.png">
                  <img style='width:32px; height:32px;' src="./resources/Images/heart.png">
                </div>
              </div>

            </div>
            <img id="opponent-image"
              style="height:150px; width: 150px; margin-top: 20px; margin-right:110px; margin-bottom:0;"
              src="./resources/Images/characters/ChooseYourFighter_1.PNG">
          </div>
          <div class="flex">
            <div style="margin-left: auto;" class="opponent-name">
              <div>
                <h1>Your Health:</h1>
                <div id='player-hearts' class="flex">
                  <img style='width:32px; height:32px;' src="./resources/Images/heart.png">
                  <img style='width:32px; height:32px;' src="./resources/Images/heart.png">
                  <img style='width:32px; height:32px;' src="./resources/Images/heart.png">
                </div>
              </div>
            </div>
          </div>
          <div
            style="border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; padding: 15px 0;background-color: rgb(215, 244, 255);"
            class="bottom flex justify-end">
            <div class="flex justify-between">
              <div style="width:250px;font-weight: bold; padding: 8px;margin-left: 15px;border: black 3px solid;">
                <div id="game-info">WHAT WILL YOU DO?</div>

                <button id="yes-button" style="display:none" class="option-button">Yes</button>
                <button id="no-button" style="display:none" class="option-button">No</button>
              </div>
            </div>
            <div style="margin-left: auto;">
              <div class="flex">
                <button id="rock" class="attack-button">
                  Rock
                </button>
                <button id="scissors" class="attack-button">
                  Scissors
                </button>
              </div>
              <div class="flex">
                <button id="paper" class="attack-button">
                  Paper
                </button>
                <button id="forfeit" class="attack-button">
                  Forfeit
                </button>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
    <div id="pop-up" class="flex justify-center">
      <div
        style="text-align:center;padding:30px;width:500px; height:430px; background-color:white; border-radius:25px; border-color:rgb(165, 178, 183); border-width:3px;">
        <div class="flex justify-center">
          <div style="width:350px;">
            <img id='gif-thing' src="./resources/Images/gifs/Scissors Wins.gif">
          </div>
        </div>
        <br>
        <div id="hit-thing">You Landed a Hit!!</div>
        <div id="continue-thing">Continue?</div>
        <div class="flex justify-center">
          <button id='try-again' style="margin:2px;" class="option-button">Yes</button>
          <button id='dont-try-again' style="margin:2px;" class="option-button">No</button>
        </div>
      </div>
    </div>
  </div>




  <script>
    const numGifs = 12;
    var previousGif = -1;
    var imgSource = '';
    var doNothing = false;
    var continueFight = false;
    const fight = document.getElementById('fight-space');
    const characterSelect = document.getElementById('character-selector');
    const title = document.getElementById('title-popup');
    characterSelect.style.display = 'none';
    fight.style.display = 'none';
    let enemyHealth = 3;
    let playerHealth = 3;
    //x = rock, y = paper, z = scissors


    var characterInfo = [{ name: "The Crusher", x: 84, y: 8, z: 8 }, { name: "The Flipper", x: 45, y: 45, z: 10 }, { name: "The Sturdy", x: 25, y: 50, z: 25 }, { name: "The Slippery", x: 10, y: 40, z: 50 }, { name: "The Smasher", x: 10, y: 33, z: 45 }, { name: "Doug lol", x: 0, y: 10, z: 10 }];
    var popup = document.getElementById('pop-up');
    popup.style.display = 'none';



    let currentCharacter = 0;
    let playerChoice = 0;

    function startGame() {
      title.style.display = 'none';
      characterSelect.style.display = 'block';
    }
    function selectCharacter() {
      if (event.target.parentNode.id) {
        currentCharacter = event.target.parentNode.id.substring(10);
        item = event.target;
        var children = item.childNodes;

        for (let i = 0; i < children.length; i++) {
          if (children[i].tagName == 'IMG')
            imgSource = children[i].src;
        }

      }
      else {
        currentCharacter = event.target.parentNode.parentNode.id.substring(10);
        item = event.target.parentNode;

        var children = item.childNodes;

        for (let i = 0; i < children.length; i++) {
          if (children[i].tagName == 'IMG')
            imgSource = children[i].src;
        }
      }
      setupGame();
    }
    function findFighters() {
      var fighterSelectButtons = document.getElementsByClassName("character-fighter");
      var fighterSelectImages = document.getElementsByClassName("character-fighter");
      var count = fighterSelectButtons.length;
      for (let i = 0; i < count; i++) {
        fighterSelectButtons[i].addEventListener("click", selectCharacter);
      }
      count = fighterSelectImages.length;
      for (let i = 0; i < count; i++) {
        fighterSelectImages[i].addEventListener("click", selectCharacter);
      }
    }
    function findFightButtons() {
      var fightButtons = document.getElementsByClassName("attack-button");
      var count = fightButtons.length;
      for (let i = 0; i < count; i++) {
        fightButtons[i].addEventListener("click", fightButtonClicked);

      }
    }
    function setupGame() {
      document.getElementById('opponent-image').src = imgSource;
      characterSelect.style.display = 'none';
      fight.style.display = 'block';
      var enemyInfoSpace = document.getElementById('enemy-info-space');
      enemyInfoSpace.innerHTML = characterInfo[currentCharacter].name;
      var gameInfo = document.getElementById("game-info").innerHTML = "WHAT WILL YOU DO?";
    }
    function fightButtonClicked() {
      if (doNothing)
        return;
      var gameInfo = document.getElementById("game-info");
      gameInfo.innerHTML = "You Chose " + event.target.id.substring(0, 1).toUpperCase() + event.target.id.substring(1);
      gameInfo.innerHTML += "<br/>Is that your final choice?";
      document.getElementById('yes-button').style.display = "";
      document.getElementById('no-button').style.display = "";
      playerChoice = event.target.id;

    }
    document.getElementById('yes-button').addEventListener("click", choseYes);
    document.getElementById('no-button').addEventListener("click", choseNo);

    function randomIntFromInterval(min, max) { // min and max included 
      return Math.floor(Math.random() * (max - min + 1) + min)
    }


    function choseYes() {
      var gameInfo = document.getElementById('game-info');
      document.getElementById('yes-button').style.display = "none";
      document.getElementById('no-button').style.display = "none";

      var enemyChoice = makeEnemyChoice();
      if (enemyChoice == "x")
        enemyChoice = 'rock';
      else if (enemyChoice == 'y')
        enemyChoice = 'paper';
      else
        enemyChoice = 'scissors'

      var win = winner(playerChoice, enemyChoice);
      var hitText = document.getElementById('hit-thing');
      var continueText = document.getElementById('continue-thing');
      var gifPlayer = document.getElementById('gif-thing');
      gifIndex = randomIntFromInterval(0, numGifs);
      while (gifIndex == previousGif) {
        gifIndex = randomIntFromInterval(0, numGifs);
      }
      gifPlayer.src = './resources/Images/gifs/' + gifIndex + '.gif';
      enemyHearts = document.getElementById('enemy-hearts');
      playerHearts = document.getElementById('player-hearts');

      if (win == 1) {
        console.log('YOU WIN');
        hitText.innerHTML = "You Landed a Hit!"
        enemyHealth--;
        for (let i = 0; i < enemyHearts.childNodes.length; i++) {
          if (enemyHearts.childNodes[i].tagName == 'IMG' && enemyHearts.childNodes[i].style.display != 'none') {
            enemyHearts.childNodes[i].style.display = 'none';
            break;
          }
        }

      }
      else if (win == 2) {
        console.log('YOU LOSE');
        hitText.innerHTML = "You Got Hit!!"
        playerHealth--;
        for (let i = 0; i < playerHearts.childNodes.length; i++) {
          if (playerHearts.childNodes[i].tagName == 'IMG' && playerHearts.childNodes[i].style.display != 'none') {
            playerHearts.childNodes[i].style.display = 'none';
            break;
          }
        }
      }
      else {
        console.log('YOU TIE');
        hitText.innerHTML = "You Tied lol";
      }


      if (playerHealth < 1) {
        hitText.innerHTML += "<br/>Dang you lost"
        continueText.innerHTML = "Do you want to try again?";
        continueFight = true;
        enemyHealth = 3;
        playerHealth = 3;
        for (let i = 0; i < document.getElementById('enemy-hearts').childNodes.length; i++) {
          if (document.getElementById('enemy-hearts').childNodes[i].tagName == 'IMG')
            document.getElementById('enemy-hearts').childNodes[i].style.display = 'block';
        }
        for (let i = 0; i < document.getElementById('player-hearts').childNodes.length; i++) {
          if (document.getElementById('player-hearts').childNodes[i].tagName == 'IMG')
            document.getElementById('player-hearts').childNodes[i].style.display = 'block';
        }
      }
      else {
        if (enemyHealth < 1) {
          hitText.innerHTML += "<br/> :0 You Won!!"
          continueText.innerHTML = "Want to pick your next challenger?";
          continueFight = false;
          enemyHealth = 3;
          playerHealth = 3;
          for (let i = 0; i < document.getElementById('enemy-hearts').childNodes.length; i++) {
            if (document.getElementById('enemy-hearts').childNodes[i].tagName == 'IMG')
              document.getElementById('enemy-hearts').childNodes[i].style.display = 'block';
          }
          for (let i = 0; i < document.getElementById('player-hearts').childNodes.length; i++) {
            if (document.getElementById('player-hearts').childNodes[i].tagName == 'IMG')
              document.getElementById('player-hearts').childNodes[i].style.display = 'block';
          }
        }
        else {
          continueText.innerHTML = "Want to continue fighting?";
          continueFight = true;
        }
      }

      popup.style.display = 'block';
      doNothing = true;

      console.log("player " + playerHealth);
      console.log("enemy " + enemyHealth);

    }

    function backToMenu() {
      document.getElementById('fight-space').style.display = 'none';
      document.getElementById('character-selector').style.display = 'block';
    }


    document.getElementById('try-again').addEventListener('click', continueYes);
    document.getElementById('dont-try-again').addEventListener('click', continueNo);


    function continueYes() {
      doNothing = false;
      popup.style.display = "none";
      if (continueFight) {
        setupGame();
      }
      else {
        backToMenu();
      }
    }
    function continueNo() {
      doNothing = false;
      popup.style.display = "none";
      if (continueFight) {
        backToMenu();
      }
      else
        setupGame();

    }


    function choseNo() {
      document.getElementById('yes-button').style.display = "none";
      document.getElementById('no-button').style.display = "none";
      setupGame();
    }

    function makeEnemyChoice() {
      //var random = Math.random() * 100; //Number between 0 and 99
      //lets say we have a bias of choosing x 60% of the time
      //lets say we have a bias of choosing z 30% of the time
      var x = characterInfo[currentCharacter].x
      var y = characterInfo[currentCharacter].y;
      var z = characterInfo[currentCharacter].z
      var nums = [];
      var count = 0;
      for (let i = 0; i < x; i++) {
        if (i != x)
          nums.push('x')
      }

      for (let i = 0; i < y; i++) {
        if (i != y)
          nums.push('y')
      }

      for (let i = 0; i < z; i++) {
        if (i != z)
          nums.push('z')
      }
      while (nums.length < 100) {
        randomNum = Math.random();
        if (randomNum < .33)
          nums.push('x');
        else {
          if (randomNum < .66)
            nums.push('y');
          else
            nums.push('z');
        }
      }

      newNum = Math.random() * 100;
      return nums[Math.round(newNum)];


    }
    function winner(player, computer) {
      console.log('player ' + player)
      console.log('computer ' + computer)
      player = player.toLowerCase();
      computer = computer.toLowerCase();
      if (player == 'forfeit')
        return 2;
      if (player === computer) {
        return 3;
      }
      else if (player == 'rock') {
        if (computer == 'paper') {
          return 2;

        } else {
          return 1;
        }
      }
      else if (player == 'scissors') {
        if (computer == 'rock') {
          return 2;
        } else {
          return 1;
        }
      }
      else if (player == 'paper') {
        if (computer == 'scissors') {
          return 2;
        } else {
          return 1;
        }
      }
    }


    var startGameButton = document.getElementById("start-game-button");
    startGameButton.addEventListener('click', startGame);
    findFighters();
    findFightButtons();
    makeEnemyChoice();


  </script>
</body>
<footer></footer>

</html>